/*!
 * DataWorker v3.1.0 (http://git.io/dw)
 * Copyright 2014-2015 Rentrak Corporation and other contributors
 * Licensed under MIT (https://github.com/dataworker/dataworker/blob/master/LICENSE)
 */
function DataWorkerHelperCreator(a){"use strict";function b(a){return"string"==typeof a?a:JSON.stringify(a)}function c(a,b){for(var c=a.length,d=0,e=b.length;c>d;)b[e++]=a[d++]}var d,e=function(){var a=this instanceof e?this:Object.create(e.prototype);return a._columns={},a._rows=[],a._summaryRows=[],a._partitionedBy=[],a._partitionedRows={},a._expectedNumRows=void 0,a._wsDatasource=void 0,a._wsAuthenticate=void 0,a._socket=void 0,a._cancelRequestsCmd=void 0,a._cancelRequestsAck=void 0,a._onSocketClose=void 0,a._waitForCancelRequestsAck=!1,a._shouldAttemptReconnect=!1,a._ajaxDatasource=void 0,a._ajaxAuthenticate=void 0,a._ajaxRequests=[],a._ajaxRequestCounter=0,a._shouldClearDataset=!1,a._rowsPerPage=10,a._currentPage=void 0,a._onlyValidForNumbersRegex=/[^0-9.e\-]/g,a._hasChildElements=!1,a._isFinished=!1,a._replyQueue=[],a};e.prototype.handleMessage=function(a){var b=this,c={};if("undefined"!=typeof a){if("initialize"===a.cmd)return b.initialize(a);"postMessage"===a.cmd?b._sendThroughWebSocket(a):a.cmd in b?c=b[a.cmd](a):c.error="Unrecognized DataWorker command: "+a.cmd,c&&b._postMessage(c)}},"undefined"==typeof window?(e.prototype._postMessage=function(b,c){this._isFinished||(a.postMessage(b),c&&this._finish())},a.onmessage=function(a){d||(d=new e),d.handleMessage(a.data)}):(e.prototype._postMessage=function(a,b){var c=this;c._replyQueue.push([a,b]),setTimeout(function(){var a=c._replyQueue.shift(),b=a[0],d=a[1];c._isFinished||(c.onmessage({data:b}),d&&c._finish())})},e.prototype.postMessage=function(){var a=this,b=arguments;setTimeout(function(){a.handleMessage.apply(a,b)})},e.prototype.terminate=function(){this.onmessage=null},window.DataWorkerHelper=e),e.prototype.finish=function(){var a=this;a._socket&&0!==a._socket.readyState&&3!==a._socket.readyState&&(void 0!==a._onSocketClose&&a._socket.send(a._onSocketClose),a._socket.onclose=function(){},a._socket.close()),a._postMessage({},!0)},e.prototype._finish=function(){var a=this;a._isFinished=!0,d=null},e.prototype.initialize=function(a){var c=this,d="string"==typeof a.datasource?{source:a.datasource}:a.datasource;c._wsDatasource=c._socket=c._ajaxDatasource=void 0;try{if("undefined"==typeof d)c._columns=c._prepareColumns(a.columns),c._rows=c._prepareRows(a.rows),c._postMessage({connected:!0});else if(/^(?:https?|file):\/\//.test(d.source))c._ajaxDatasource=d.source,c._ajaxAuthenticate=d.authenticate||a.authenticate,c._isLocalAjax=/^file/.test(d.source),c._verifyAjaxDatasource(a);else{if(!/^wss?:\/\//.test(d.source))throw new Error("Could not initialize DataWorker; unrecognized datasource.");c._wsDatasource=d.source,c._wsAuthenticate=b(d.authenticate||a.authenticate),c._cancelRequestsCmd=b(d.cancelRequestsCmd),c._cancelRequestsAck=b(d.cancelRequestsAck),c._shouldAttemptReconnect=a.shouldAttemptReconnect,c._initializeWebsocketConnection(a)}}catch(e){var f=e.message,g=e.stack,h=c._wsDatasource&&!c._socket;g&&(f+="\n\n"+g),c._postMessage({connected:!1,error:f,unsupported:h})}return c},e.prototype._verifyAjaxDatasource=function(a){var b=this,c=new XMLHttpRequest;return c.onreadystatechange=function(){4===this.readyState&&((b._isLocalAjax?this.response:200===this.status)?(b._postMessage({connected:!0}),"undefined"!=typeof a.request&&b.requestDataset(a)):b._postMessage({connected:!1,unsupported:0===this.status}))},c.open("HEAD",b._ajaxDatasource),c.send(),!0},e.prototype._getRequestParams=function(a){var b="";try{if(a){"string"==typeof a&&(a=JSON.parse(a));for(var c in a)b+=c+"="+encodeURIComponent(a[c])+"&"}}catch(d){"string"==typeof a&&(b+=a)}return b},e.prototype._processInput=function(a,b){var d,e=this;try{d="string"==typeof a?JSON.parse(a):a}catch(f){return e._postMessage({error:"Error "+f.message+": "+a})}if(d.error)return e._postMessage({error:d.error});if(d.trigger&&e._postMessage({triggerMsg:d.msg}),d.columns){e._shouldClearDataset&&e.clearDataset();var f=e._checkColumnsForAppend(d.columns);if(f)return e._postMessage({error:f})}if("INFINITE"===d.expectedNumRows?e._expectedNumRows=d.expectedNumRows:void 0!==d.expectedNumRows&&(void 0===e._expectedNumRows&&(e._expectedNumRows=0),e._expectedNumRows+=parseInt(d.expectedNumRows)),d.rows){var g=e._prepareRows(d.rows);c(g,e._rows),e._partitionedBy.length>0&&e._insertIntoPartitionedRows(g),"INFINITE"!==e._expectedNumRows&&e._rows.length===e._expectedNumRows?e._postMessage({allRowsReceived:!0}):e._postMessage({rowsReceived:d.rows.length})}void 0!==e._columns&&(void 0!==d.expectedNumRows||d.rows&&d.columns)&&e._postMessage({columnsReceived:!0}),d.summaryRows&&c(e._prepareRows(d.summaryRows),e._summaryRows),(0===parseInt(d.expectedNumRows)||void 0===e._expectedNumRows&&b)&&e._postMessage({allRowsReceived:!0})},e.prototype._ajax=function(a){var b=this,c=new XMLHttpRequest,d=b._ajaxDatasource+(/^\?/.test(a)?"":"?"),e=0,f=b._ajaxRequestCounter;b._ajaxRequests.push(c),d+=b._getRequestParams(a),d+=b._getRequestParams(b._ajaxAuthenticate),c.onreadystatechange=function(){if(f===b._ajaxRequestCounter&&c.readyState>2&&(b._isLocalAjax?c.response:200===c.status)){var a=c.responseText.substr(e).split(/([\r\n]+)/);a[a.length-1]&&3===c.readyState&&a.pop(),a.forEach(function(a,d){e+=a.length,d%2||b._processInput(a||{},4===c.readyState)})}},c.open("GET",d,!0),c.send()},e.prototype._initializeWebsocketConnection=function(a){var b=this;return b._wsDatasource?(b._socket=new WebSocket(b._wsDatasource),b._socket.onopen=function(){b._wsAuthenticate&&b._socket.send(b._wsAuthenticate),"undefined"!=typeof a.request&&b._socket.send(a.request),b._postMessage({connected:!0})},b._socket.onclose=function(c){b._shouldAttemptReconnect&&1e3!==c.code&&1001!==c.code&&b._initializeWebsocketConnection(a)},b._socket.onerror=function(a){0===a.target.readyState||3===a.target.readyState?(b._socket=null,b._postMessage({connected:!1})):b._postMessage({error:"Error: Problem with connection to datasource."})},b._socket.onmessage=function(a){return b._waitForCancelRequestsAck&&a.data===b._cancelRequestsAck?(b._waitForCancelRequestsAck=!1,void b._postMessage({})):void b._processInput(a.data)},b._onSocketClose=a.onClose,!0):!1},e.prototype._prepareColumns=function(a){var b={};return a.forEach(function(a,c){"string"==typeof a&&(a={name:a}),a.sortType=a.sortType||"alpha",a.aggType=a.aggType||"max",a.title="title"in a?a.title:a.name,a.index=c,a.isVisible="isVisible"in a?a.isVisible:!0,b[a.name]=a}),b},e.prototype._prepareRows=function(a){return a.map(function(a){return a instanceof Array?{row:a,isVisible:!0}:a})},e.prototype._getVisibleColumns=function(){var a=this,b={},c=0;return Object.keys(a._columns).sort(function(b,c){return a._columns[b].index-a._columns[c].index}).forEach(function(d){a._columns[d].isVisible&&(b[d]=JSON.parse(JSON.stringify(a._columns[d])),b[d].index=c++)}),b},e.prototype._getVisibleRows=function(a,b,d,e){var f=this,g=[],h=[],i={};if((a||[]).length||(a=void 0),b=b||f._rows,f._hasChildElements){var j=[];b.forEach(function(a){j.push(a),a.hasChildren&&c(a.children,j)}),b=j}return(a||Object.keys(f._columns)).forEach(function(b){var c=f._columns[b];c&&(a||c.isVisible)&&g.push(c.index)}),b.forEach(function(a){if(a.isVisible||d){var b=g.map(function(b){return f._getCellDisplayValueByIndex(a,b)});if(b.parentRow=a.parentRow,e){var c=!0,j=i;if(b.forEach(function(a){(c=c&&j[a])||(j[a]={}),j=j[a]}),c)return}h.push(b)}}),h},e.prototype._insertIntoPartitionedRows=function(a){var b=this;b._hashRowsByKeyColumns(b._partitionedBy,a,b._partitionedRows,!0)},e.prototype._alphaSort=function(a,b){return a=(a||"").toLowerCase(),b=(b||"").toLowerCase(),b>a?-1:a>b?1:0},e.prototype._localeAlphaSort=function(a,b){return a=(a||"").toLowerCase(),b=(b||"").toLowerCase(),a.localeCompare(b)},e.prototype._numSort=function(a,b){var c=this;return a+="",a=a.replace(c._onlyValidForNumbersRegex,""),c._decimalMarkCharacter&&(a=a.replace(c._decimalMarkCharacter,".")),a=parseFloat(a),b+="",b=b.replace(c._onlyValidForNumbersRegex,""),c._decimalMarkCharacter&&(b=b.replace(c._decimalMarkCharacter,".")),b=parseFloat(b),isNaN(a)||isNaN(b)?isNaN(a)&&isNaN(b)?0:isNaN(a)?-1:1:a-b},e.prototype._scanRows=function(a){var b=this,c=a.filters,d=[],e=[];return Object.keys(b._columns).forEach(function(a){e.push(b._columns[a].index),d[b._columns[a].index]="num"===b._columns[a].sortType}),("string"==typeof c[0]||c[0]instanceof RegExp)&&(c=[{columns:c[1]instanceof Array?c[1]:c.slice(1),regex:new RegExp(c[0])}]),c=c.map(function(a){return a.column&&(a.columns=[a.column]),"string"==typeof a.columns&&(a.columns=[a.columns]),a.columns&&a.columns.length?a.indices=a.columns.reduce(function(a,c){var d=b._columns[c];return d&&a.push(d.index),a},[]):a.indices=e,a.tests=["eq","ne","gte","gt","lte","lt","regex","!regex"].filter(function(b){return b in a}),["regex","!regex"].forEach(function(b){a[b]&&(a[b]=new RegExp(a[b]))}),a.accentInsensitive&&a.tests.forEach(function(c){var d=a[c],e=!!c.match(/regex/i);if(("string"==typeof d||e)&&(a[c]=b._stripAccentMarks(d.toString()),e)){var f=a[c].match(new RegExp("^/(.*?)/([gimy]*)$"));a[c]=new RegExp(f[1],f[2])}}),a}).filter(function(a){return a.indices.length}),b._rows.reduce(function(e,f){if(!f.isVisible&&!a.allRows)return e;var g=c.every(function(a){return a.indices[a.matchAll?"every":"some"](function(c){return a.tests.every(function(e){return b._testCell(b._getCellRawValueByIndex(f,c),a,d[c],e)})})});return g?a.setVisibility?f.isVisible=!0:e.push(f):a.setVisibility&&(f.isVisible=!1),e},[])},e.prototype._testCell=function(a,b,c,d){var e=this;switch(c?a=parseFloat(a):b.accentInsensitive&&"string"==typeof a&&(a=e._stripAccentMarks(a)),d){case"regex":return b.regex.test(a);case"!regex":return!b["!regex"].test(a);case"eq":return a==b.eq;case"ne":return a!=b.ne;case"gte":return a>=b.gte;case"gt":return a>b.gt;case"lte":return a<=b.lte;case"lt":return a<b.lt}},e.prototype._stripAccentMarks=function(a){var b=[/[\xC0-\xC5]/g,/[\xE0-\xE5]/g,/[\xC8-\xCB]/g,/[\xE8-\xEB]/g,/[\xCC-\xCF]/g,/[\xEC-\xEF]/g,/[\xD2-\xD8]/g,/[\xF2-\xF8]/g,/[\xD9-\xDC]/g,/[\xF9-\xFC]/g,/[\xDD\u0178]/g,/[\xFD\xFF]/g,/[\xD1]/g,/[\xF1]/g,/[\xC7]/g,/[\xE7]/g,/[\u0160]/g,/[\u0161]/g],c=["A","a","E","e","I","i","O","o","U","u","Y","y","N","n","C","c","S","s"];return b.forEach(function(b,d){a=a.replace(b,c[d])}),a},e.prototype._extractColumnNamesInOrder=function(a){var b=this;return Object.keys(a).sort(function(c,d){return b._numSort(a[c].index,a[d].index)})},e.prototype._checkColumnsForAppend=function(a){var b,c,d=this;if(a instanceof Array&&(a=d._prepareColumns(a)),0===Object.keys(d._columns).length)return void(d._columns=a);if(c=function(){var b=d._extractColumnNamesInOrder(d._columns).join(", "),c=d._extractColumnNamesInOrder(a).join(", ");return"Cannot append dataset (columns do not match):\n	"+b+"\n		VS\n	"+c},Object.keys(a).length!==Object.keys(d._columns).length)return c();var e=Object.keys(a);for(b=0;b<e.length;b++){var f=e[b];if("undefined"==typeof d._columns[f])return c();if(a[f].index!==d._columns[f].index)return c()}},e.prototype._hashRowsByKeyColumns=function(a,b,c,d){var e=this,f=a.map(function(a){return e._columns[a].index});return b.forEach(function(a){var b=f.map(function(b){return e._getCellRawValueByIndex(a,b)}).join("|");b in c?c[b].push(d?a:a.row):c[b]=[d?a:a.row]}),c},e.prototype._hashDatasetByKeyColumns=function(a,b){var c=this,d=a.keyColumns,e={},f=[],g={};return d=d instanceof Array?d:[d],d.forEach(function(a){a in c._columns||f.push('Column "'+a+'" not in dataset.')}),c._hashRowsByKeyColumns(d,c._rows,e,b),g.hash=e,f.length&&(g.error=f.join("\n")),g},e.prototype._getLastPage=function(a){var b=this,c=b._getVisibleRows(a.columnNames);return{visibleRows:c,lastPage:Math.ceil(c.length/b._rowsPerPage)-1}},e.prototype._hideShowColumns=function(a,b){var c,d=this;"columnNames"in a?a.columnNames.forEach(function(a){a in d._columns&&(d._columns[a].isVisible=b)}):"columnNameRegex"in a?(c=new RegExp(a.columnNameRegex),Object.keys(d._columns).forEach(function(a){c.test(a)&&(d._columns[a].isVisible=b)})):"property"in a&&Object.keys(d._columns).forEach(function(c){var e=d._columns[c];e[a.property.property]===a.property.value&&(e.isVisible=b)})},e.prototype._getCellValue=function(a,b,c){var d=a.row[b];if("object"==typeof d&&null!==d){if(void 0!==d[c])return d[c];throw new Error("Unrecognized cell value format: "+d)}return d},e.prototype._getCellDisplayValueByIndex=function(a,b){var c=this;return c._getCellValue(a,b,"display")},e.prototype._getCellRawValueByIndex=function(a,b){var c=this;return c._getCellValue(a,b,"raw")},e.prototype._getCellRawValueByColumn=function(a,b){var c=this;return c._getCellRawValueByIndex(a,c._columns[b].index)},e.prototype.sort=function(a){function b(a,b){var e,f,g,h,i,j,k,l;for(e=0;e<d.length;e++){if(f=d[e].match(/(-?)(\w+)/),g=f[2],h=!!f[1],i=c._columns[g].sortType,h?(l=c._getCellRawValueByColumn(a,g),k=c._getCellRawValueByColumn(b,g)):(k=c._getCellRawValueByColumn(a,g),l=c._getCellRawValueByColumn(b,g)),"alpha"===i)j=c._alphaSort(k,l);else if("localeAlpha"===i)j=c._localeAlphaSort(k,l);else{if("num"!==i)throw new Error("Unknown sort type.");j=c._numSort(k,l)}if(0!==j)return j}return 0}var c=this,d=a.sortOn,e=a.rows||c._rows;return e.sort(b),c._hasChildElements&&e.forEach(function(a){a.hasChildren&&a.children.sort(b)}),{}},e.prototype.setDecimalMarkCharacter=function(a){var b=this;return b._onlyValidForNumbersRegex=new RegExp("[^0-9e\\-"+(b._decimalMarkCharacter=a.decimalMarkCharacter)+"]","g"),{}},e.prototype.search=function(a){var b=this,c=b._scanRows({setVisibility:!1,filters:a.filters,allRows:a.allRows});return"string"==typeof a.sortOn&&(a.sortOn=[a.sortOn]),"string"==typeof a.columns&&(a.columns=[a.columns]),"string"==typeof a.returnColumns&&(a.returnColumns=[a.returnColumns]),a.sortOn&&b.sort({rows:c,sortOn:a.sortOn}),c=b._getVisibleRows(a.returnColumns||a.columns,c,!0,a.getDistinct),a.limit>0&&(c=c.slice(a.fromRow,a.fromRow+a.limit)),{rows:c}},e.prototype.applyFilter=function(a){var b=this;return a.setVisibility=!0,b._scanRows(a),{}},e.prototype.clearFilters=function(){var a=this;return a._rows.forEach(function(a){a.isVisible=!0}),{}},e.prototype.filter=function(a){var b=this;return b._rows=b._scanRows(a),{}},e.prototype.applyLimit=function(a){var b=this,c=a.numRows,d=0;return b._rows.forEach(function(a){d++<c?a.isVisible=!0:a.isVisible=!1}),{}},e.prototype.limit=function(a){var b=this,c=a.numRows;return b._rows=b._rows.slice(0,c),{}},e.prototype.removeColumns=function(a){var b=this,c=a.columnsToRemove,d={};return Object.keys(b._columns).forEach(function(a,e){if(-1===c.indexOf(a)){var f=b._columns[a];f.index=e,d[a]=f}}),b._rows.forEach(function(a){var c=[];Object.keys(d).forEach(function(e){c[d[e].index]=a.row[b._columns[e].index]}),a.row=c}),b._columns=d,{}},e.prototype.prependColumnNames=function(a){var b=this,c=a.prepend,d={};return Object.keys(b._columns).forEach(function(a){d[c+a]=b._columns[a]}),b._columns=d,{}},e.prototype.alterColumnName=function(a){var b,c=this,d=a.oldName,e=a.newName;return Object.keys(c._columns).forEach(function(a){a!==d&&a===e&&(b="Column "+e+" already exists in the dataset.")}),c._columns[e]=c._columns[d],delete c._columns[d],"undefined"==typeof b?{}:{error:b}},e.prototype.alterColumnSortType=function(a){var b=this,c=a.column,d=a.sortType;return b._columns[c].sortType=d,{}},e.prototype.alterColumnAggType=function(a){var b=this,c=a.column,d=a.aggType;return b._columns[c].aggType=d,{}},e.prototype.alterColumnTitle=function(a){var b=this,c=a.column,d=a.title;return b._columns[c].title=d,{}},e.prototype.append=function(a){var b=this;if(a.newColumns){var c=b._checkColumnsForAppend(a.newColumns);if(c)return{error:c}}return b._rows.splice.apply(b._rows,["index"in a?a.index:b._rows.length,0].concat(a.preparedRows||b._prepareRows(a.newRows))),{}},e.prototype.hash=function(a){var b=this;return b._hashDatasetByKeyColumns(a)},e.prototype.join=function(a){var b=this,c=b._hashDatasetByKeyColumns(a),d=a.rHash,e=a.joinType,f=a.fColumns;if("error"in c)return{error:c.error};c=c.hash;var g=[],h="right"===e?d:c,i="right"===e?c:d,j=i[Object.keys(i)[0]][0].map(function(){return""}),k=Object.keys(b._columns).length;return e="undefined"==typeof e?"inner":e,Object.keys(h).forEach(function(a){a in i?h[a].forEach(function(b){i[a].forEach(function(a){g.push("right"===e?a.concat(b):b.concat(a))})}):"inner"!==e&&h[a].forEach(function(a){g.push("right"===e?j.concat(a):a.concat(j))})}),Object.keys(f).forEach(function(a){var c=f[a];c.index+=k,b._columns[a]=c}),b._rows=b._prepareRows(g),{}},e.prototype.group=function(a){var b=this,c=b._hashDatasetByKeyColumns(a),d=a.keyColumns,e=[],f=[];return"error"in c?{error:c.error}:(c=c.hash,Object.keys(c).forEach(function(a){var g=[];c[a].forEach(function(a){Object.keys(b._columns).forEach(function(c){var e=b._columns[c].aggType,h=b._columns[c].index,i=-1!==d.indexOf(c);h in g&&!i?"sum"===e?g[h]+=a[h]:"max"===e?g[h]=g[h]<a[h]?a[h]:g[h]:"min"===e?g[h]=g[h]>a[h]?a[h]:g[h]:f.push('Unrecognized aggType for columm "'+c+'".'):g[h]=a[h]})}),e.push(g)}),b._rows=b._prepareRows(e),f.length>0?{error:f.join("\n")}:{})},e.prototype.partition=function(a){var b=this,c=b._hashDatasetByKeyColumns(a,!0);if("error"in c)return{error:c.error};c=c.hash,b._partitionedBy=a.keyColumns;Object.keys(b._columns).map(function(a){return b._columns[a]}).sort(function(a,c){return b._numSort(a.index,c.index)});return Object.keys(c).forEach(function(a){var d=c[a];b._partitionedRows[a]=d}),{}},e.prototype.getPartitionKeys=function(a){var b=this,c=Object.keys(b._partitionedRows).map(function(a){return a.split("|")});return{keys:c}},e.prototype.getPartitioned=function(a){var b=this,c=b._partitionedRows[a.key];return{rows:c?b._getVisibleRows(void 0,b._partitionedRows[a.key]):[]}},e.prototype.sortPartition=function(a){var b=this;return"string"===a.sortOn&&(a.sortOn=[a.sortOn]),b.sort({rows:b._partitionedRows[a.key],sortOn:a.sortOn}),{}},e.prototype.getDataset=function(a){var b=this;return{rows:b._getVisibleRows(a.columnNames)}},e.prototype.getDistinctConsecutiveRows=function(a){var b,c=this,d=c._getVisibleRows([a.columnName]),e=[],f=0;return d.forEach(function(a,c){(!c||!a.parentRow&&b!=a[0])&&(e.length&&(e[f++][2]=c-1),b=a[0],e.push([b,c,c]))}),e.length&&(e[f++][2]=d.length-1),{distinctRows:e}},e.prototype.getNumberOfRecords=function(a){var b=this;return{numRows:b._getVisibleRows().length}},e.prototype.paginate=function(a){var b=this;return b._rowsPerPage=a.rowsPerPage,{}},e.prototype.getPage=function(a){var b,c,d=this,e=d._getLastPage(a);return a.lastPage=e.lastPage,d.setPage(a),b=d._rowsPerPage*d._currentPage,c=b+d._rowsPerPage,{rows:e.visibleRows.slice(b,c),currentPage:d._currentPage+1}},e.prototype.setPage=function(a){var b=this;return"lastPage"in a||(a.lastPage=b._getLastPage(a).lastPage),"undefined"!=typeof a.pageNum?b._currentPage=a.pageNum-1:"undefined"==typeof b._currentPage?b._currentPage=0:a.incrementPage?b._currentPage++:a.decrementPage&&b._currentPage--,b._currentPage<0&&(b._currentPage=0),b._currentPage>a.lastPage&&(b._currentPage=a.lastPage),{currentPage:b._currentPage+1}},e.prototype.getNumberOfPages=function(a){var b=this,c=b._getLastPage(a);return{numberOfPages:c.lastPage+1}},e.prototype.hideColumns=function(a){var b=this;return b._hideShowColumns(a,!1),{}},e.prototype.showColumns=function(a){var b=this;return b._hideShowColumns(a,!0),{}},e.prototype.hideAllColumns=function(a){var b=this;return Object.keys(b._columns).forEach(function(a){b._columns[a].isVisible=!1}),{}},e.prototype.showAllColumns=function(a){var b=this;return Object.keys(b._columns).forEach(function(a){b._columns[a].isVisible=!0}),{}},e.prototype.getAllColumns=function(a){var b=this;return{columns:b._columns}},e.prototype.getColumns=function(a){var b=this;return{columns:b._getVisibleColumns()}},e.prototype.getRows=function(a){var b=this,c=a.start,d=a.end;return"undefined"!=typeof d&&(d=parseInt(d)+1),{rows:b.getDataset(a).rows.slice(c,d)}},e.prototype.getHashedRows=function(a){var b=this,c=a.columnNames,d=b.getRows(a).rows;return c.length||(c=b.getColumns().columns,c=Object.keys(c).sort(function(a,b){return c[a].index-c[b].index})),{rows:d.map(function(a){return c.reduce(function(b,c,d){return b[c]=a[d],b},{})})}},e.prototype.getSummaryRows=function(a){var b=this;return{summaryRows:b._getVisibleRows(a.columnNames,b._summaryRows)}},e.prototype.setSummaryRows=function(a){var b=this;return b._summaryRows=b._prepareRows(a.summaryRows),{}},e.prototype.getExpectedNumRows=function(a){var b=this;return{exNumRows:b._expectedNumRows}},e.prototype.clearDataset=function(){var a=this;return a._columns={},a._rows=[],a._summaryRows=[],a._partitionedRows=[],a._expectedNumRows=void 0,a._shouldClearDataset=!1,{}},e.prototype.requestDataset=function(a){var b=this;return b._shouldClearDataset=!0,b.requestDatasetForAppend(a)},e.prototype.requestDatasetForAppend=function(a){var b=this,c=!1;return"undefined"!=typeof b._socket?(b._socket.send(a.request),c=!0):"undefined"!=typeof b._ajaxDatasource&&(b._ajax(a.request),c=!0),c?{}:{error:"Could not request dataset; no datasource defined."}},e.prototype.addChildRows=function(a){var b=this,c=b._prepareRows(a.rows),d=b._hashRowsByKeyColumns([a.joinOn],c,{},!0),e=b._columns[a.joinOn].index;return b._rows.forEach(function(a,c){var f=d[b._getCellRawValueByIndex(a,e)];f&&(b._hasChildElements=!0,a.hasChildren=!0,a.children=f,f.forEach(function(b){b.parentRow=a,b.isVisible=a.isVisible}))}),{}},e.prototype.refresh=function(a){var b=this;return{columns:b._getVisibleColumns(),rows:b._getVisibleRows()}},e.prototype.refreshAll=function(a){var b,c=this;return b=a.complexValues?c._rows.map(function(a){return a.row}):c._rows.map(function(a){return a.row.map(function(b,d){return c._getCellDisplayValueByIndex(a,d)})}),{columns:c._columns,rows:b}},e.prototype.cancelOngoingRequests=function(a){var b=this;if(b._ajaxDatasource)b._ajaxRequests.forEach(function(a){a.abort()}),b._ajaxRequests=[],b._ajaxRequestCounter++;else if(b._wsDatasource&&void 0!==b._socket&&void 0!==b._cancelRequestsCmd&&(b._waitForCancelRequestsAck=!!b._cancelRequestsAck,b._socket.send(b._cancelRequestsCmd),b._waitForCancelRequestsAck))return;return{}},e.prototype._sendThroughWebSocket=function(a){var b=this;"undefined"!=typeof b._socket&&0!==b._socket.readyState&&3!==b._socket.readyState&&b._socket.send(a.message)}}DataWorkerHelperCreator(this);
//# sourceMappingURL=dataworker-helper.min.js.map